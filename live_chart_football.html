<!DOCTYPE html>
<html>
<head>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script type = "text/JavaScript"> function AutoRefresh( t ) { setTimeout("location.reload(true);", t); }   </script>
</head>
<body style="width:auto; height:auto; background-color:#333" onload = "JavaScript:AutoRefresh(30000);">
    <div id="chart">
        <canvas id="myChart" style = "height: 500px; width: 90%;"></canvas>
    </div> 

    <p>This page will refresh every 30 seconds.</p>

</body>

<script> 
    var ctx = document.getElementById("myChart").getContext('2d');

    function DrawChart() {
        var d = $.getJSON('https://mariusano.github.io/live_sports_p/datas.json')
            .done(function (data) {
                var datas = {"type": "line", "data": {"labels": d.responseJSON["game_datas"]["chrono"], 
                "datasets": [
                {"data": d.responseJSON["game_datas"]["home_prob"], "borderColor": 'rgba(60, 180, 75, 1.0)', "fill": false, "pointBorderWidth": 10, "pointRadius": 3, "label": d.responseJSON["home"]}, 
                {"data": d.responseJSON["game_datas"]["draw_prob"], "borderColor": 'rgba(230, 25, 75, 1.0)', "fill": false, "pointBorderWidth": 10, "pointRadius": 3, "label": "Draw"}, 
                {"data": d.responseJSON["game_datas"]["away_prob"], "borderColor": 'rgba(255, 225, 25, 1.0)', "fill": false, "pointBorderWidth": 10, "pointRadius": 3, "label":d.responseJSON["away"]}]}, 
                "options": {"title": {"text": [d.responseJSON["match"], "Score : "+d.responseJSON["score"]], "display": true, "fontSize": 22, "fontColor": "rgba(169, 169, 169, 1.0)"},
                            "legend": {"labels": {"fontColor": "rgba(169, 169, 169, 1.0)", "fullWidth": true}}, 
                            "scales": {"yAxes": [{"ticks": {"beginAtZero": true, "padding": 15, "max": 100, "fontColor": "rgba(169, 169, 169, 1.0)"}, 
                                                    "scaleLabel":{"display":true, "labelString":"Win Probability %", "fontColor": "rgba(169, 169, 169, 1.0)"}}],
                                        "xAxes": [{"ticks": {"fontColor": "rgba(169, 169, 169, 1.0)"},
                                                    "scaleLabel":{"display":true, "labelString":"Minutes played", "fontColor": "rgba(169, 169, 169, 1.0)"}}]},
                            "animation": {"duration": 0},
                            "plugins": {}}}

                var myChart = new Chart(ctx, datas);
             }
            )     
        }

    DrawChart();

</script>

</html>
